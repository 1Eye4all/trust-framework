--
-- Tables for DTF functionality, HSQL
-- 

CREATE TABLE IF NOT EXISTS Card (
	id BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) PRIMARY KEY,
	title VARCHAR(256),
	description VARCHAR(4096)
);

CREATE TABLE IF NOT EXISTS Tag (
	id BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) PRIMARY KEY,
	name VARCHAR(256)
);

CREATE TABLE IF NOT EXISTS Dependency (
	id BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) PRIMARY KEY,
	description VARCHAR(4096)
);

CREATE TABLE IF NOT EXISTS CardDependencies (
	cardId BIGINT,
	dependencyId BIGINT,
	FOREIGN KEY (cardId) REFERENCES Card(id),
	FOREIGN KEY (dependencyId) REFERENCES Dependency(id)
);

CREATE TABLE IF NOT EXISTS DependencyTags (
	dependencyId BIGINT,
	tagId BIGINT,
	FOREIGN KEY (dependencyId) REFERENCES Dependency(id),
	FOREIGN KEY (tagId) REFERENCES Tag(id)
);

CREATE TABLE IF NOT EXISTS Provides (
	cardId BIGINT,
	tagId BIGINT,
	FOREIGN KEY (cardId) REFERENCES Card(id),
	FOREIGN KEY (tagId) REFERENCES Tag(id)
);
